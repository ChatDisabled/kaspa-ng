<!DOCTYPE html>
<html>
    <body>
        <script type="module">
            import init, { print, print_with_value } from './wasm/helloworld_demo.js';
            async function start() {
                // Initialize the WASM module
                await init();

                // Call the exported functions from the WASM module
                print();
                print_with_value('Test');
            }

            window.addEventListener("message", (message, sender)=>{
                console.log("sandbox: message, sender", message, sender)
                let {data} = message;
                window.parent.postMessage({
                    from: "sandbox",
                    data: "reply from sandbox"
                }, "*")
            })
            let counter = 0;
            setInterval(()=>{
                window.parent.postMessage({
                    from: "sandbox",
                    counter: counter++
                }, "*")
            }, 1000)

            start();
        </script>
    </body>
</html>